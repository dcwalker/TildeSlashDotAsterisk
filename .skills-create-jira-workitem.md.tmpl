---
name: create-jira-workitem
description: Create a Jira work item using the Atlassian CLI with rich formatted content in ADF format. Use when the user wants to create, file, or submit a Jira issue, task, bug, or story.
---

# Create Jira Work Item

Create a Jira work item using the Atlassian CLI (acli) with support for rich formatted content using Atlassian Document Format (ADF).

## When to Use

Use this skill when:
- The user wants to create a new Jira work item (issue, task, bug, story, etc.)
- The user asks to file, create, or submit a Jira ticket
- The user mentions creating work in Jira
- The user wants to use rich formatting in a Jira description

## Prerequisites

This skill requires:
- Atlassian CLI (acli) installed and authenticated
- Valid Jira site URL
- Project key and work item type

## Instructions

### Step 1: Review Project Documentation

Before creating a work item, review the following project documentation if available:
- AGENTS.md - Project-specific guidance for AI agents
- CONTRIBUTING.md - Contribution guidelines and standards
- ISSUE_REPORTING_GUIDELINES.md (or similar) - Guidelines for reporting issues

These documents provide important context about project conventions, required information, and proper issue formatting.

### Step 2: Verify Authentication

Check if acli is authenticated:

```bash
acli jira auth status
```

If not authenticated, prompt the user to authenticate first. They can authenticate using:

```bash
acli jira auth login --site "mysite.atlassian.net" --email "user@atlassian.com" --token
```

Or using OAuth:

```bash
acli jira auth login --web
```

### Step 3: Gather Required Information

The following fields are required to create a work item. If any are missing, stop and ask the user:

1. Project key (e.g., "TEAM", "PROJ")
2. Work item type (e.g., "Task", "Bug", "Story", "Epic")
3. Summary (title/subject of the work item)

Optional but recommended:
- Description (can use rich formatting with ADF)
- Assignee (email address)
- Labels (comma-separated)
- Priority
- Due date

For any required field (including those discovered in the generated template) where the correct value is not clear or obvious, prompt the user rather than guessing.

### Step 4: Generate JSON Template

Generate a JSON template to understand the structure:

```bash
acli jira workitem create --generate-json > /tmp/workitem-template.json
```

If the template omits custom or extra fields (e.g. Severity, Environment), generate again with all fields:

```bash
acli jira workitem create --generate-json --fields *all > /tmp/workitem-template.json
```

Review the template to understand available fields for the work item type.

### Step 5: Build Work Item JSON

Create a JSON file with the work item details. If a required field has no obvious value (e.g. custom dropdowns, project-specific options), ask the user before choosing a value. For rich formatted descriptions, use Atlassian Document Format (ADF).

Basic ADF structure for descriptions:

```json
{
  "version": 1,
  "type": "doc",
  "content": [
    {
      "type": "paragraph",
      "content": [
        {
          "type": "text",
          "text": "Your text here"
        }
      ]
    }
  ]
}
```

ADF supports:
- Paragraphs, headings, lists (bullet and ordered)
- Code blocks with syntax highlighting
- Tables, panels, expandable sections
- Text formatting: bold (strong), italic (em), underline, strikethrough, code
- Links, mentions, emojis
- Images and attachments

For formatting examples, refer to: https://developer.atlassian.com/cloud/jira/platform/apis/document/structure/

### Step 6: Present Draft to User

Before creating the work item, present a clear summary to the user:

```
Work Item Draft:
- Project: [PROJECT_KEY]
- Type: [WORK_ITEM_TYPE]
- Assignee: [ASSIGNEE or "Unassigned"]
- Labels: [LABELS or "None"]
- Priority: [PRIORITY or "Default"]

Summary:
[SUMMARY]

Description:
[RENDERED_DESCRIPTION with formatting applied - convert ADF to readable text with markdown-style formatting for bold, italic, lists, code blocks, etc.]
```

Important: Present the description with rich text rendered in a human-readable format, not as raw JSON or ADF markup. Convert ADF formatting to natural text presentation (e.g., bold text shown as bold, lists shown as bulleted items, code blocks shown as code).

Do NOT show the JSON file path or raw JSON content to the user.

Ask the user: "Would you like to proceed with creating this work item? (yes/no)"

If the user requests changes, update the JSON and present the draft again.

If anything in the description or requirements is unclear, stop and ask the user for clarification before proceeding.

### Step 7: Create the Work Item

Once approved, create the work item:

```bash
acli jira workitem create --from-json "/path/to/workitem.json"
```

Capture the output, which will include the work item key (e.g., "TEAM-123").

### Step 8: Share the Result

Extract the work item key from the output and construct the URL:

```
https://[SITE].atlassian.net/browse/[WORK_ITEM_KEY]
```

Share with the user as a clickable link:

```
Work item created successfully: [WORK_ITEM_KEY](https://[SITE].atlassian.net/browse/[WORK_ITEM_KEY])
```

## ADF Formatting Examples

### Bold and Italic Text

```json
{
  "type": "text",
  "text": "bold text",
  "marks": [{"type": "strong"}]
}
```

### Code Block

```json
{
  "type": "codeBlock",
  "attrs": {
    "language": "javascript"
  },
  "content": [
    {
      "type": "text",
      "text": "console.log('Hello world');"
    }
  ]
}
```

### Bullet List

```json
{
  "type": "bulletList",
  "content": [
    {
      "type": "listItem",
      "content": [
        {
          "type": "paragraph",
          "content": [
            {
              "type": "text",
              "text": "First item"
            }
          ]
        }
      ]
    },
    {
      "type": "listItem",
      "content": [
        {
          "type": "paragraph",
          "content": [
            {
              "type": "text",
              "text": "Second item"
            }
          ]
        }
      ]
    }
  ]
}
```

### Link

```json
{
  "type": "text",
  "text": "Click here",
  "marks": [
    {
      "type": "link",
      "attrs": {
        "href": "https://example.com"
      }
    }
  ]
}
```

## Error Handling

If the work item creation fails:

1. Check the error message from acli
2. Common issues:
   - Missing required fields for the work item type
   - Invalid project key
   - User doesn't have permission to create work items in the project
   - Invalid ADF structure
   - Authentication expired

3. Display the error to the user and suggest corrective action
4. Offer to retry after fixing the issue

## Important Notes

- To include custom or extra fields in generated templates or when viewing work items, use `--fields *all` with acli jira commands (e.g. `workitem create --generate-json --fields *all`, or when getting an issue).
- Always validate that all required information is provided before attempting to create the work item
- Always show a draft and get user approval before creating
- If description content is ambiguous, stop and ask for clarification
- Use ADF format for rich descriptions with formatting, lists, code blocks, etc.
- Keep the generated JSON files in /tmp or ask the user where to save them
- Clean up temporary files after successful creation
- The work item key is case-sensitive
- Make the final URL clickable for easy access

## Related Documentation

- Atlassian CLI: https://developer.atlassian.com/cloud/acli/guides/how-to-get-started/
- ADF Format: https://developer.atlassian.com/cloud/jira/platform/apis/document/structure/
- ADF Builder: https://developer.atlassian.com/cloud/jira/platform/apis/document/builder/
