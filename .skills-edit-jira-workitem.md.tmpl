---
name: edit-jira-workitem
description: Edit one or more Jira work items using the Atlassian CLI (acli). Use when the user wants to update tickets in bulk or singly, e.g. add comments, assign, change status, change issue type, or set custom fields like Jira Component to the Compass component for a repo.
---

# Edit Jira Work Item(s)

Edit one or more Jira work items using the Atlassian CLI (acli). Supports single or bulk updates: comments, assignee, status transitions, issue type, summary, description, labels, and custom fields (e.g. Jira Component). Use acli as the primary interface for programmatic updates.

## When to Use

- User wants to update one or more Jira tickets (any combination of assignee, status, type, summary, description, labels, custom fields).
- User wants to add a comment to one or more work items.
- User wants to assign or reassign work items (single or bulk).
- User wants to transition work items to a new status (e.g. To Do, In Progress, Done).
- User wants to change issue type (e.g. convert tasks to bugs) and/or set the Jira Component field to the Compass component for "this repo".

## Prerequisites

- Atlassian CLI (acli) installed and authenticated.
- Valid Jira site. Verify with: `acli jira auth status`.

## Selecting Work Items

acli supports several ways to specify which work items to edit:

- **By key(s)**: `--key "KEY-1,KEY-2,KEY-3"` (comma-separated).
- **By JQL**: `--jql "project = PROJ AND status = 'To Do'"` (use the user's project key).
- **By filter ID**: `--filter 10001`.
- **By file** (assign only): `--from-file issues.txt` (keys or IDs separated by commas, spaces, or newlines).

For bulk updates, use `--key "KEY-1,KEY-2,..."` or `--jql`. Use `--ignore-errors` to continue when some items fail, and `--yes` to skip confirmation prompts.

## Commands by Update Type

### Assign

```bash
acli jira workitem assign --key "KEY-1,KEY-2" --assignee "user@example.com"
```

- Use `--assignee "@me"` to self-assign, or `--assignee "default"` for the project default assignee.
- Use `--remove-assignee` to clear the assignee.
- Supports `--jql`, `--filter`, `--from-file` for selecting work items.

### Transition (change status)

```bash
acli jira workitem transition --key "KEY-1,KEY-2" --status "Done"
```

- `--status` is the target status name (e.g. "To Do", "In Progress", "Done"). Use exact names as in the project workflow.

### Add comment

```bash
acli jira workitem comment-create --key "KEY-1" --body "Comment text"
```

- Use `--body-file path/to/file` for long or ADF content.
- Use `--editor` to open an editor for the body.
- Supports `--jql`, `--filter` for multiple work items.

### Edit fields (summary, description, type, labels, assignee)

```bash
acli jira workitem edit --key "KEY-1,KEY-2" --summary "New summary" --type "Bug"
```

Common flags: `--summary`, `--description`, `--description-file`, `--type`, `--assignee`, `--labels`, `--remove-labels`, `--remove-assignee`. Use `--generate-json` to produce a template, then `--from-json path/to.json` to apply edits from a JSON file.

### Edit custom fields (e.g. Jira Component)

Custom fields (including Jira Component / Compass component) are not exposed as simple flags. Use edit with a JSON payload:

1. **Get the custom field ID** (e.g. for "Component"): use the get-jira-custom-field-details skill or run `get-field-details.py` with the field name. The ID is like `customfield_10000`.
2. **Get the value to set** (e.g. Compass component for this repo): use the get-compass-component-by-repo skill or run `get-component-by-repo.py` with the repo name. Use the component name (or ID if the field expects it) in the edit JSON.
3. **Build edit JSON**: include only the fields you want to change. For issue type and Component in one go, example structure:
   ```json
   {
     "type": "Bug",
     "customfield_12345": { "value": "My Compass Component Name" }
   }
   ```
   (Field ID and value format depend on the field type; use get-jira-custom-field-details to confirm.)
4. **Apply**: `acli jira workitem edit --key "KEY-1,KEY-2,..." --from-json path/to/edit.json --yes`

To see current values for an issue (including custom fields) before building the JSON: `acli jira workitem view KEY-1 --json --fields *all`.

### Compass component in the standard components field

On some Jira Cloud sites the repo's Compass component is linked via the standard **components** field, not a custom field. When you view an issue that has that component set (`acli jira workitem view KEY --json --fields components` or `--fields *all`), the API returns an array of component objects. Example shape:

```json
[
  {
    "id": "<component_id>",
    "name": "<component name>",
    "ari": "ari:cloud:compass:<cloudId>:component/.../...",
    "description": "...",
    "metadata": {
      "compassComponentState": "ACTIVE",
      "compassComponentVersion": "...",
      "typeId": "..."
    },
    "self": "https://<site>/rest/api/3/component/<component_id>"
  }
]
```

To set this component when editing an issue, include the standard **components** field in the edit JSON using the component id (from an existing issue that already has it, or from the project's components): e.g. `"components": [ { "id": "<component_id>" } ]`. Use `acli jira workitem view KEY --json --fields components` on a reference issue that already has the desired Compass component to get the correct id.

### Changing issue type when workflows differ (status mapping)

Jira Cloud enforces two validation rules when changing issue type via the REST API (and thus via acli edit). If either applies, the simple edit fails (often with "The issue type selected is invalid"); use the **Bulk move** API instead:

1. **Target workflow does not contain the issue's current status.** The API fails if the target issue type's workflow does not have the issue's current status (e.g. Task uses status "To Do" but the Bug workflow has no "To Do", only "Open"). [JRACLOUD-68207](https://jira.atlassian.com/browse/JRACLOUD-68207) (fixed Aug 2022).
2. **Subtask vs standard.** The API fails if one of source and target is a subtask and the other is not.

So: use **bulk move** when changing to an issue type that uses a different workflow (typical when switching between Task, Bug, Story, etc. if each has its own workflow), or when converting between subtask and standard. Use simple edit only when the target issue type's workflow already includes the issue's current status (e.g. same workflow for both types).

**How to check before editing:** Query whether the target issue type's workflow contains the issue's current status:

1. Get the issue's current status id and project key: `acli jira workitem view KEY --json --fields status,project` (use `fields.status.id` and `fields.project.key`).
2. Get statuses for the target issue type: `GET /rest/api/3/project/{projectIdOrKey}/statuses`. The response is an array of issue-type objects; each has `id`, `name`, and `statuses` (array of status objects with `id`, `name`). Find the entry whose `id` or `name` matches the target issue type (e.g. Bug).
3. If that entry's `statuses` array contains a status with the same `id` as the issue's current status, the simple edit can succeed. If not, use bulk move. See [Get all statuses for project](https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-projects/#api-rest-api-3-project-projectidorkey-statuses-get).

The **Bulk move** API supports changing issue type and lets you map source workflow statuses to target workflow statuses:

1. **REST API**: `POST /rest/api/3/bulk/issues/move` with a body that includes `targetToSourcesMapping`. The key is `PROJECT_KEY,TARGET_ISSUE_TYPE_ID` (e.g. same project, Bug's type id). For each target you specify:
   - `issueIdsOrKeys`: the issues to move.
   - `targetStatus`: status mapping, e.g. `"statuses": { "SOURCE_STATUS_ID": ["TARGET_STATUS_ID"] }` so each source status maps to a valid status in the target workflow. Use status IDs from the workflow (from the issue's `status` object or workflow/status APIs). If it is not clear which target workflow state (status) to map to, prompt the user rather than guessing.
   - `inferStatusDefaults`: set to `true` to let Jira infer status mapping when possible; set to `false` and provide `targetStatus` when you need explicit mapping.
   - `targetMandatoryFields`: if the target issue type has required fields (e.g. Severity, Environment for Bug), provide them here.

2. **Docs**: [Bulk move issues](https://developer.atlassian.com/cloud/jira/platform/rest/v3/api-group-issue-bulk-operations/#api-rest-api-3-bulk-issues-move-post), [Bulk operation APIs: additional examples and FAQ](https://developer.atlassian.com/cloud/jira/platform/bulk-operation-additional-examples-and-faqs/) (includes `targetStatus` and `targetToSourcesMapping` examples).

3. **acli**: acli does not expose the bulk move endpoint. For type change with status mapping use the REST API directly (with the same auth acli uses, e.g. OAuth or Basic).

4. **UI**: In Jira, "Move" (e.g. from the issue menu) lets you change issue type and walks through workflow status mapping; that flow uses the same bulk move API under the hood.

## Example: Convert multiple issues to Bug and set Jira Component to repo Compass component

1. Determine where the component is stored: view a reference issue that already has the repo's Compass component set (`acli jira workitem view REF_KEY --json --fields *all`). If the component appears in the **components** field (array of objects with `id`, `name`, `ari`), use that; otherwise look for a custom field (e.g. "Domain Component").
2. If using the standard **components** field: note the component `id` from the reference issue. Edit JSON: `{ "components": [ { "id": "<component_id>" } ] }` (use the id from the reference issue).
3. If using a custom field: get the field ID via `get-field-details.py "Component"` (or the field name in your site) and the value format. Get the component name from `get-component-by-repo.py` if needed. Edit JSON example: `{ "customfield_12345": { "value": "Name From Step 1" } }`.
4. Build the full edit JSON (e.g. include `issues` and the field(s) to update). For acli, the JSON file must contain the `issues` array; acli does not allow both `--key` and `--from-json`. Run: `acli jira workitem edit --from-json edit.json --yes`. Use `--ignore-errors` to continue when some keys fail.

## Important Notes

- For any required or custom field where the correct value is not obvious (e.g. project-specific Component options), prompt the user or use get-jira-custom-field-details / get-compass-component-by-repo as above.
- When changing issue type or transitioning status, if the correct target workflow state (status) is not clear (e.g. when building a bulk move `targetStatus` mapping or choosing a transition), prompt the user rather than guessing.
- Use `--fields *all` when viewing work items if you need to see or copy custom field IDs and values.
- Keep edit JSON files in /tmp or a location the user approves; clean up after use.
- Reference: [acli jira workitem edit](https://developer.atlassian.com/cloud/acli/reference/commands/jira-workitem-edit/), [assign](https://developer.atlassian.com/cloud/acli/reference/commands/jira-workitem-assign/), [transition](https://developer.atlassian.com/cloud/acli/reference/commands/jira-workitem-transition/), [comment-create](https://developer.atlassian.com/cloud/acli/reference/commands/jira-workitem-comment-create/), [view](https://developer.atlassian.com/cloud/acli/reference/commands/jira-workitem-view/).
